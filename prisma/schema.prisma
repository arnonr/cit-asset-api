// This is your Prisma schema file,
// learn more contact it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model asset {
    id                   Int            @id @default(autoincrement())
    asset_code           String?        @db.VarChar(50)@unique
    asset_name           String?        @db.VarChar(200)
    input_year           Int?           @db.Year
    inspection_date      DateTime?      @db.Date
    approved_date        DateTime?      @db.Date
    vendor               String?        @db.VarChar(200)
    asset_type_id        Int
    brand                String?        @db.VarChar(200)
    model                String?        @db.VarChar(200)
    serial_number        String?        @db.VarChar(100)
    price                Decimal?       @db.Decimal(10,2)
    budget_type_id       Int
    is_transfer          Int?           @db.TinyInt
    transfer_from        String?        @db.VarChar(200)
    location             String?        @db.VarChar(200)
    department_id        Int?
    drawer_name          String?        @db.VarChar(200)
    holder_name          String?        @db.VarChar(200)
    warranty_type_1      String?        @db.VarChar(200)
    warranty_day_1       Int?
    warranty_type_2      String?        @db.VarChar(200)
    warranty_day_2       Int?
    cover_photo          String?        @db.VarChar(200)
    asset_status         Int?           @db.TinyInt
    cancel_type          Int?           @db.TinyInt
    cancel_date          DateTime?      @db.Date
    cancel_comment       String?        @db.VarChar(200)
    transfer_to          String?        @db.VarChar(200)
    transfer_to_department  String?     @db.VarChar(200)
    comment              String?        @db.VarChar(200)
    is_active            Int?            @default(1)
    created_at           DateTime?      @default(now()) @db.DateTime(0)
    created_by           String?        @db.VarChar(255)
    updated_at           DateTime?      @updatedAt
    updated_by           String?        @db.VarChar(255)
    deleted_at           DateTime?
    asset_location_history  asset_location_history[]
    holder_history       holder_history[]
    repair_history       repair_history[]
    asset_photo          asset_photo[]
    asset_type           asset_type      @relation(fields: [asset_type_id], references: [id])
    budget_type          budget_type     @relation(fields: [budget_type_id], references: [id])
    department           department?       @relation(fields: [department_id], references: [id])
}

model asset_location_history {
    id          Int         @id @default(autoincrement())
    asset_id    Int
    location    String?     @db.VarChar(200)
    status      Int         @db.TinyInt @default(0)
    approved_at DateTime?
    approved_by String?     @db.VarChar(32)
    is_active   Int?         @default(1)
    created_at  DateTime?   @default(now()) @db.DateTime(0)
    created_by  String      @db.VarChar(255)
    updated_at  DateTime?   @updatedAt
    updated_by  String?     @db.VarChar(255)
    deleted_at  DateTime?
    asset       asset       @relation(fields: [asset_id], references: [id])
}

model asset_photo {
    id          Int         @id @default(autoincrement())
    asset_id    Int?
    secret_key  String      @db.VarChar(255)
    filename    String      @db.VarChar(200)
    is_active   Int?         @default(1)
    created_at  DateTime?   @default(now()) @db.DateTime(0)
    created_by  String      @db.VarChar(255)
    updated_at  DateTime?   @updatedAt
    updated_by  String?     @db.VarChar(255)
    deleted_at  DateTime?
    asset       asset?      @relation(fields: [asset_id], references: [id])
}

model asset_type {
    id         Int          @id @default(autoincrement())
    code       String?      @db.VarChar(100) @unique
    name       String?      @db.VarChar(200)
    is_active  Int?       @default(1)
    created_at DateTime?    @default(now()) @db.DateTime(0)
    created_by String?      @db.VarChar(32)
    updated_at DateTime?    @updatedAt
    updated_by String?      @db.VarChar(32)
    deleted_at  DateTime?
    asset      asset[]
}

model budget_type {
    id         Int          @id @default(autoincrement())
    code       String       @db.VarChar(100)
    name       String?      @db.VarChar(200)
    is_active  Int?         @default(1)
    created_at DateTime?    @default(now()) @db.DateTime(0)
    created_by String?      @db.VarChar(32)
    updated_at DateTime?    @updatedAt
    updated_by String?      @db.VarChar(32)
    deleted_at  DateTime?
    asset      asset[]
}

model department {
    id          Int         @id @default(autoincrement())
    code        String      @db.VarChar(100)
    name        String?     @db.VarChar(200)
    is_active   Int?         @default(1)
    created_at  DateTime?   @default(now()) @db.DateTime(0)
    created_by  String?     @db.VarChar(32)
    updated_at  DateTime?   @updatedAt
    updated_by  String?     @db.VarChar(32)
    deleted_at  DateTime?
    user        user[]
    asset       asset[]
}

model holder_history {
    id          Int         @id @default(autoincrement())
    asset_id    Int
    holder_name String?     @db.VarChar(200)
    status      Int         @db.TinyInt @default(0)
    approved_at DateTime?
    approved_by String?     @db.VarChar(32)
    is_active   Int?        @default(1)
    created_at  DateTime?   @default(now()) @db.DateTime(0)
    created_by  String      @db.VarChar(255)
    updated_at  DateTime?   @updatedAt
    updated_by  String?     @db.VarChar(255)
    deleted_at  DateTime?
    asset       asset       @relation(fields: [asset_id], references: [id])
}

model repair_history {
    id          Int         @id @default(autoincrement())
    asset_id    Int
    repair_date DateTime?   @db.Date
    description String?     @db.Text
    price       Decimal?    @db.Decimal(10,2)
    status      Int         @db.TinyInt @default(0)
    reject_comment String?  @db.VarChar(200)
    approved_at DateTime?
    approved_by String?     @db.VarChar(32)
    is_active   Int?         @default(1)
    created_at  DateTime?   @default(now()) @db.DateTime(0)
    created_by  String      @db.VarChar(255)
    updated_at  DateTime?   @updatedAt
    updated_by  String?     @db.VarChar(255)
    deleted_at  DateTime?
    asset       asset       @relation(fields: [asset_id], references: [id])
}

model user {
    id            Int                 @id @default(autoincrement())
    username      String              @db.VarChar(32)@unique
    password      String?             @db.VarChar(100)
    name          String              @db.VarChar(100)
    email         String?             @db.VarChar(100)
    tel           String?             @db.VarChar(100)
    level         Int                 @default(1)
    department_id Int?
    is_active     Int?                 @default(1)
    created_at    DateTime?           @default(now()) @db.DateTime(0)
    created_by    String?             @db.VarChar(255)
    updated_at    DateTime?           @updatedAt
    updated_by    String?             @db.VarChar(255)
    deleted_at  DateTime?
    department    department?         @relation(fields: [department_id], references: [id])
}

